<html>
<head>
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js'></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
	<script src='js/soundmanager2-jsmin.js'></script>
	<script src='js/custom.js'></script>	
	<link rel="stylesheet" type="text/css" href="custom.css">
</head>
<body>
	<div style='width:600px;margin:auto;'>
		<div>
			<h3>
				<a href='.'>GridTone</a> |
				<a href='#gt'>Demo</a> |
				<a href='http://github.com/gridtone/gridtone.github.com' target='_new'>Source Code</a>
			</h3>
		</div>		
		<p>
		GridTone is a 99% JavaScript generative sound instrument.<br> 
		A total of 24 notes from middle C plus one full octave make up the [current] sound range.	
		</p>		
		<h3>Instructions</h3>
		<ol>
			<li>Click squares on the <a href='#gt'>grid</a>.</li>
			<li>Click 'Start'.</li>
			<li>Click 'Save' to share the URL to your creation.</li>
		</ol>
		<h3>Examples</h3>
		<ol>
			<li><a href='?size=9&scale=hang&speed=190&bank=picat&echo=true&grid=3_6:1,3_4:1,5_2:1,5_4:1'>Hang 1 *</a> - simple.</li>
			<li><a href='?size=9&scale=hang&speed=200&bank=fem&echo=true&grid=7_6:1,6_2:3,7_1:4,6_0:4,7_4:1,7_2:3,4_8:3,4_6:1,2_5:1,0_3:3'>Hang FemVox *</a> - sounds like deadmau5.</li>
			<li><a href='?size=9&scale=hang&speed=175&bank=fem&echo=true&grid=6_5:2,2_7:4,4_6:1,6_7:2,2_5:4'>Hang 3 *</a> visually pleasing</li>
			<li><a href='?size=9&scale=hang&speed=225&echo=true&grid=8_7:2,1_5:2,6_5:1,6_2:1,0_7:4,5_5:2'>Hang 4 *</a> - this one evolves... it's weird.</li>
			<li><a href='?size=6&scale=min&speed=200&echo=true&grid=0_1:4,2_1:4,1_1:2,3_1:2'>Minor Scale</a> - wanted to make sure you saw how the parameters change the dynamics.</li>
			<li><a href='?size=9&scale=maj&speed=225&echo=true&grid=4_2:1,3_3:1,2_2:1,3_1:3'>Major Scale</a> - another variation</li>
		</ol>
		* <a href='http://en.wikipedia.org/wiki/Hang_(musical_instrument)' target='_new'>Integral Hang Drum</a>
		<h3>Cellular Automatation</h3>
		<p>The instrument follows these basic set of rules: 
			<br>
			<ul>
				<li>For each grid block a note is assigned.</li>
				<li>Blocks travel in the direction shown with the arrow and when they hit a wall, they play the note on the grid block.</li>
				<li>When a block collides with another block, they rotate and continue on.</li> 
				<li>Speed is determined by the step input in milliseconds. Higher value means longer delay between steps.</li>
			</ul>
		</p>				

		<h3>Advanced</h3>
		<ul>
			<li><b>Size</b> - Determines the size of the grid. Numbers only. Changes take effect after you press rebuild.</li>
			<li><b>Scale</b> - Will modify the notes played on the grid to match the musical scale selected.</li>
			<li><b>Step</b> - Delay between steps. Numbers only. In milliseconds, so higher number = longer delay.</li>
			<li><b>Echoplex</b> - Will add an echo to the sound giving it an ethereal sound. The delay in echoes is timed to the 'step' parameter.</li>
			<li><b>Debug</b> - Shows notes on grid and current activity to the right of grid.</li>			
		</ul>
		Patterns will emerge and they may take 15 seconds to appear or an hour. The patterns will always repeat, eventually. 		
		<h3>Tools</h3>
		<ul>
			<li>I'm using <a href='http://www.schillmania.com/projects/soundmanager2/' target='_new'>Soundmanager2</a> to play the sounds and fiddle with the panning and volume. 
			It's an impressive library. It uses flash however to actually play the sounds. See the 'Gripes' section for what I've learned about the current state of HTML5 audio.
			I was hoping to write this thing and have it play on my iphone, but html5 audio is not ready.
			</li>
			<li>I used <a href='http://www.propellerheads.se/products/reason/' target='_new'>Reason</a> to generate the sounds. I created a midi file where I played each note from middle C up one octave. Then I just changed the samples.</li>
			<li>I wrote a script to slice up the sounds and auto name them, so creating new tones is simple.</li>
			<li><a href='http://jquery.com/' target='_new'>JQuery</a> is used throughout for the DOM manipulation. I looked at using the html5 canvas object, but it's not as well supported as jquery is.</li>
			<li>Tested and working on the latest versions of Chrome, Firefox, Opera and Safari on Windows. Chrome, Firefox on linux. 
			I don't have access to a mac so I don't know if it works or not, but feel free to let me know.</li>
		</ul>
		
		<h3>Inspiration</h3>
		I saw this site <a href='http://www.earslap.com/links/otomata-online-generative-music-instrument' target='_new'>http://www.earslap.com/links/otomata-online-generative-music-instrument</a> off of 
		<a href='http://reddit.com' target='_new'>http://reddit.com</a> the other day and wanted to see how it worked. 
		The author did not release any source code, just some rules. So I wrote my own, in javascript, and I expanded on it a bit, with adjustable grid size, step count and scale. Enjoy.
		
		<h3>Gripes</h3>
		<ul>
			<li>It's 99% javascript because HTML5 &lt;audio&gt; architects should be drawn and quartered. HTML5 will never replace flash until they figure this giant, gaping, design-flaw out that is 
			caused by legalease and shows the absurdity of greed. It seems that the audio tag was only designed for streaming songs and not for, oh... I don't know... sound effects. Then there is the 
			whole licensing on format battle going on. Basically all sides think the other side is out to screw them, meanwhile technology is stiffled by greed.
			</li>
			<li>IE engineers write stuff like they are from another dimension. I hate to have an early 90's throwback of 'this works best in {insert crappy browser here}', 
			but IE guys make this a reality even today. Lynx works better than IE (thick on the sarcasm).
			<br><b style='color:#5BA03C;'>Just plain doesn't work on Internet Explorer.</b>
			</li>
		</ul>
		<a name='gt'></a>
		<div id='license'>
			<h3>License</h3>
			<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target='_new'><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />
			GridTone is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target='_new'>Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.	
		</div>
		<p><div>Contact me at <a href='mailto:gridtone@iblunk.com'>gridtone@iblunk.com</a></div></p>
	
		<div style='clear:both'>
			<hr>			
			<h2>GridTone</h2>
			Size: <input size='5' style='text-align:right' type='text' id='size'/>		
			<button id='rebuild'>Rebuild</button>
			Select Scale: <select id='scale'>		
				<option value='hang'>Integral Hang</option>
				<option value='maj'>Major</option>	
				<option value='min'>Minor</option>					
				<option value='all'>All</option>
			</select>		
			<br>
			Step: <input size='5' style='text-align:right' type='text' id='speed'/> (in milliseconds)
			<input type='checkbox' id='echo' checked />	<label for='echo'>Echoplex?</label>  
			<br>
			<button id='start'>Start</button>
			<button id='clear'>Clear</button>
			<button id='save'>Save</button>
			<label for='doLog'>Debug?</label> <input type='checkbox' id='doLog' />
			Soundbank: <select id='soundbank'>		
				<option value='picat'>Piccata</option>
				<option value='fem'>FemVox</option>
				<option value='guita'>Guitar</option>	
				<option value='piano'>Piano</option>
				<option value='vib'>Vibraphone</option>				
				<option value='old'>Old Sine</option>
			</select>			
			<br>
			<p></p>
			<div id='url'></div>
			<p></p>
			<div id="wrapper" style='text-align:center;width:99%'>		
				<div id="mainGrid" ></div>
				<div id='debug'></div>				
			</div>			
		</div>		
	</div>	
</body>
</html>